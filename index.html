
<!DOCTYPE html>
<html lang="en">
<head>
<title>图乎-和世界分享你我刚拍的图片！</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://cdn.bootcss.com/bootstrap/4.1.0/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/popper.js/1.14.1/esm/popper.min.js"></script>
<script src="https://cdn.bootcss.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
      <script>
        (function(t,u,r,b,o,s){
          o=document.createElement(u);
          o.setAttribute('data-turbojs', b);
          o.async=1;o.src=r;
          s=t.getElementsByTagName(u)[0];
          s.parentNode.insertBefore(o, null);
        })(document, 'script',
          "//dooe3vx785zy.cloudfront.net/assets/turbojs/8/turbo.js?version=8",
          'https://cdn.getforge.com/bilibili.getforge.io/1529036149/_squish.js');
      </script>
    
<link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<style type="text/css">
    body{
    webkit-background-size: cover;
    -moz-background-size: cover;
    background-size: cover;
    -o-background-size: cover;
    opacity: 1;
    font-family: "Arial","Microsoft YaHei","黑体","宋体",sans-serif;
    }
.tu form{
  position: absolute;
  top: 50%;
  left: 50%;
  margin-top: -100px;
  margin-left: -250px;
  width: 500px;
  height: 200px;
  border: 4px dashed #fff;
  background: rgba(255, 255, 255, 0.43);
}
.tu form p{
  text-align: center;
  color: #ffffff;
}
.tu form input{
  position: absolute;
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  outline: none;
  opacity: 0;
}
.tu form button{
  margin: 0;
  color: #fff;
  background: #16a085;
  border: none;
  width: 508px;
  height: 35px;
  margin-top: -20px;
  margin-left: -4px;
  border-radius: 4px;
  border-bottom: 4px solid #117A60;
  transition: all .2s ease;
  outline: none;
}
.tu form button:hover{
  background: #149174;
	color: #0C5645;
}
.tu form button:active{
  border:0;
}
.tu .setfile{
  height:200px;
  display: flex;
  flex-wrap: wrap;
  align-content: center;
}
.imgv{
    position: absolute;
    left: 50%;
    margin-top: 60px;
    margin-left: -250px;
    width: 500px;
    height: auto;
    display: none;
}
.imgv img{
    width: 100%;
    height:auto;
}
#purl{
    text-align: center;
    color:#fff;
}
#fileinfo{
  display:none;
  height: 200px;
  text-align:center;
}
</style>
</head>
<body>
<div class="container">
	<div class="row">
		
		<div class="tu">
		  <div id="logo" class="mx-auto py-2">
			<img width="70px" height="auto" src="//t1.picb.cc/uploads/2018/06/15/2TXp4W.png" alt="免费图床 - 免费保存图片，无限制保存，全网CDN加速，截图永久保存 - 免费图床">
		</div>
		  <div class="imgv bg-white p-3">
		    <img src="" id="tupian" class="img-fluid">
  <div class="form-group p-3">
    <label for="exampleFormControlInput1">外链URL:</label>
    <input type="text" id="iurl" class="form-control" id="exampleFormControlInput1" >
  </div>
		  </div>
			<form id="uploadForm" action="https://s.taobao.com/image" method="post">
				<input type="file" name="imgfile">
				<p class="setfile p-2 m-2">
					<i class="fa fa-cloud-upload fa-5x w-100" aria-hidden="true"></i>
					<span class="w-100">选择或拖放文件到此处, 开始上传你的图片。</span>
				</p>
				<span id="fileinfo" class="my-2 p-2 text-center"></span>
				<button type="submit">上传</button>
			</form>
		</div>
	</div>
	<script type="text/javascript">
var url = '//query.yahooapis.com/v1/public/yql' + 
    '?q=' + encodeURIComponent('select * from json where url=@url') +
    '&url=' + encodeURIComponent('https://www.bing.com/HPImageArchive.aspx?format=js&idx=0&n=8&mkt=zh-CN') +
    '&format=json&callback=?';
    $.getJSON(url, function(result) {
    var random = Math.round(Math.random() * 8 - 0.5);
    var img = result.query.results.json.images[random];
    sd=result;
    $(document.body).css("background", "linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(//www.bing.com" + img.url + ") no-repeat");
});
function renderSize(value){
    if(null==value||value==''){
        return "0 Bytes";
    }
    var unitArr = new Array("Bytes","KB","MB","GB","TB","PB","EB","ZB","YB");
    var index=0,
        srcsize = parseFloat(value);
 index=Math.floor(Math.log(srcsize)/Math.log(1024));
    var size =srcsize/Math.pow(1024,index);
    //  保留的小数位数
    size=size.toFixed(2);
    return size+unitArr[index];
}

$(document).ready(function(){
    $('form input').change(function () {
        $('form p').hide();
        $('#fileinfo').css('display', 'block');
        var upfile=this.files;
        var tstr='您即将上传'+upfile[0].name+'('+renderSize(upfile[0].size)+')<br/> 上传前请检测文件是否合法，禁止上传色情、反动、暴力等违法违规图片<br/>造成的一切恶果由图片上传者承担！';
        $('#fileinfo').html(tstr);
        $("#uploadForm").on('submit',(function(e) {
		e.preventDefault();
		$.ajax({
        	url: "https://s.taobao.com/image",
			type: "POST",
			data:  new FormData(this),
			contentType: false,
    	cache: false,
			processData:false,
			dataType: 'json',
			success: function(data)
		    {
		      $("#uploadForm").hide();
		      $(".imgv").css('display', 'block');;
		       $("#iurl").val(data.url);
		       $("#tupian").attr("src",data.url);
		    },
		  	error: function() 
	    	{
	    	} 	        
	   });
	}));  
    });
});
	</script>
	<meta name='forge-tag' value='forge-token:1529036149' /><script id="IntercomSettingsScriptTag">
  window.intercomSettings = {"email":"jingguanzhang@gmail.com","name":"hello808","created_at":1529035847,"user_id":32347,"sites":1,"plan":null,"user_hash":"be7c8f950094143c61f4db46816f3bcc569c6c42da67afbe940f96fa96782f1a","app_id":"rr9td82p"};
</script>
<script>(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',intercomSettings);}else{var d=document;var i=function(){i.c(arguments)};i.q=[];i.c=function(args){i.q.push(args)};w.Intercom=i;function l(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/rr9td82p';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);}if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}};})()</script>
</body>
	</html>
